
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>速写底图生成器</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tweakpane@4.0.1/dist/tweakpane.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4efe9 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        header {
            text-align: center;
            padding: 20px 0;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.5rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 1.2rem;
        }
        
        .content {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .controls {
            flex: 1;
            min-width: 300px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .preview {
            flex: 2;
            min-width: 400px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .canvas-container {
            width: 100%;
            max-width: 800px;
            height: 500px;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: auto;
            background-color: #f9f9f9;
            margin-bottom: 20px;
        }
        
        canvas {
            display: block;
            background-color: white;
        }
        
        .actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background: #3498db;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        button:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .export-btn {
            background: #2ecc71;
        }
        
        .export-btn:hover {
            background: #27ae60;
        }
        
        .reset-btn {
            background: #e74c3c;
        }
        
        .reset-btn:hover {
            background: #c0392b;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .content {
                flex-direction: column;
            }
            
            .controls, .preview {
                min-width: 100%;
            }
            
            .canvas-container {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>速写底图生成器</h1>
            <p class="subtitle">自定义网格参数，生成适合速写的底图</p>
        </header>
        
        <div class="content">
            <div class="controls">
                <div id="pane-container"></div>
            </div>
            
            <div class="preview">
                <div class="canvas-container">
                    <canvas id="gridCanvas" style="width: 100%"></canvas>
                </div>
                
                <div class="actions">
                    <button id="updateBtn">更新预览</button>
                    <button id="exportBtn" class="export-btn">导出图片</button>
                    <button id="resetBtn" class="reset-btn">重置参数</button>
                </div>
            </div>
        </div>
        
        <footer>
            <p>© 2023 速写底图生成器 | 使用Canvas和Tweakpane构建</p>
        </footer>
    </div>
        <script type="module">
        import {Pane} from 'https://cdn.jsdelivr.net/npm/tweakpane@4.0.5/dist/tweakpane.min.js';
        // ...

        // 初始化参数
        const params = {
            title: '速写底图',
            rows: 5,
            columns: 5,
            cellWidth: 400,
            cellHeight: 400,
            lineColor: '#3498db',
            lineWidth: 1,
            titleSize: 24,
            titleColor: '#2c3e50',
            backgroundColor: '#ffffff',
            showNumbers: false
        };

        // 初始化Tweakpane
        const pane = new Pane({
            container: document.getElementById('pane-container')
        });

        // 添加参数控件
        pane.addBinding(params, 'title');
        pane.addBinding(params, 'rows', { min: 1, max: 20, step: 1 });
        pane.addBinding(params, 'columns', { min: 1, max: 20, step: 1 });
        pane.addBinding(params, 'cellWidth', { min: 100, max: 2000, step: 100 });
        pane.addBinding(params, 'cellHeight', { min: 100, max: 2000, step: 100 });
        pane.addBinding(params, 'lineColor');
        pane.addBinding(params, 'lineWidth', { min: 0.5, max: 5, step: 0.5 });
        pane.addBinding(params, 'titleSize', { min: 12, max: 48, step: 2 });
        pane.addBinding(params, 'titleColor');
        pane.addBinding(params, 'backgroundColor');
        pane.addBinding(params, 'showNumbers');

        // 获取Canvas元素和上下文
        const canvas = document.getElementById('gridCanvas');
        const ctx = canvas.getContext('2d');

        // 更新Canvas尺寸和绘制网格
        function updateCanvas() {
            // 计算Canvas尺寸
            const canvasWidth = params.columns * params.cellWidth + 100;
            const canvasHeight = params.rows * params.cellHeight + 100;
            
            // 设置Canvas尺寸
            canvas.width = canvasWidth;
            canvas.height = canvasHeight;
            
            // 绘制背景
            ctx.fillStyle = params.backgroundColor;
            ctx.fillRect(0, 0, canvasWidth, canvasHeight);
            
            // 绘制标题
            ctx.fillStyle = params.titleColor;
            ctx.font = `bold ${params.titleSize}px Arial`;
            ctx.textAlign = 'center';
            ctx.fillText(params.title, canvasWidth / 2, 40);
            
            // 绘制网格
            ctx.strokeStyle = params.lineColor;
            ctx.lineWidth = params.lineWidth;
            
            // 计算网格起始位置（居中显示）
            const startX = 50;
            const startY = 70;
            
            // 绘制垂直线
            for (let i = 0; i <= params.columns; i++) {
                const x = startX + i * params.cellWidth;
                ctx.beginPath();
                ctx.moveTo(x, startY);
                ctx.lineTo(x, startY + params.rows * params.cellHeight);
                ctx.stroke();
            }
            
            // 绘制水平线
            for (let i = 0; i <= params.rows; i++) {
                const y = startY + i * params.cellHeight;
                ctx.beginPath();
                ctx.moveTo(startX, y);
                ctx.lineTo(startX + params.columns * params.cellWidth, y);
                ctx.stroke();
            }
            
            // 绘制单元格编号（可选）
            if (params.showNumbers) {
                ctx.fillStyle = '#7f8c8d';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                
                for (let row = 0; row < params.rows; row++) {
                    for (let col = 0; col < params.columns; col++) {
                        const x = startX + col * params.cellWidth + params.cellWidth / 2;
                        const y = startY + row * params.cellHeight + params.cellHeight / 2;
                        ctx.fillText(`${row+1}-${col+1}`, x, y);
                    }
                }
            }
        }

        // 初始化Canvas
        updateCanvas();

        // 更新按钮事件
        document.getElementById('updateBtn').addEventListener('click', updateCanvas);

        // 导出按钮事件
        document.getElementById('exportBtn').addEventListener('click', function() {
            const link = document.createElement('a');
            link.download = `${params.title}-${params.rows}x${params.columns}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
        });

        // 重置按钮事件
        document.getElementById('resetBtn').addEventListener('click', function() {
            // 重置参数
            params.title = '速写底图';
            params.rows = 5;
            params.columns = 5;
            params.cellWidth = 100;
            params.cellHeight = 100;
            params.lineColor = '#3498db';
            params.lineWidth = 1;
            params.titleSize = 24;
            params.titleColor = '#2c3e50';
            params.backgroundColor = '#ffffff';
            params.showNumbers = true;
            
            // 刷新Tweakpane
            pane.refresh();
            
            // 更新Canvas
            updateCanvas();
        });

        // 添加参数变化监听
        pane.on('change', function() {
            updateCanvas();
        });
    </script>
</body>
</html>
